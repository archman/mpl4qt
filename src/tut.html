<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorials &mdash; mpl4qt 2.8.5 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Keyborard Shortcuts" href="keyshort.html" />
    <link rel="prev" title="Deployment" href="deploy.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            mpl4qt
          </a>
              <div class="version">
                2.8.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#designer">Designer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#random-x-y-curve-plotter">Random X-Y Curve Plotter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-new-application">Create a New Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#place-widgets">Place Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inspect-matplotlibcurvewidget">Inspect MatplotlibCurveWidget</a></li>
<li class="toctree-l3"><a class="reference internal" href="#edit-signal-slot">Edit Signal/Slot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implement-additional-features">Implement Additional Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extended">Extended</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#barchart-plot-example">BarChart Plot Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stem-plot-example">Stem Plot Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="keyshort.html">Keyborard Shortcuts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html#slots">Slots</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mpl4qt</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorials</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/src/tut.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this heading"></a></h1>
<p>In this section, general guidelines about developing PyQt application with
<code class="docutils literal notranslate"><span class="pre">mpl4qt</span></code> will be addressed, starting the development with the following
applications:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#random-x-y-curve-plotter"><span class="std std-ref">Random X-Y Curve Plotter</span></a></p></li>
</ul>
<section id="designer">
<h2>Designer<a class="headerlink" href="#designer" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">designer</span></code> is a user-friendly GUI application to help the developer to build
UI painlessly, in a WYSIWYG way. The created UI file from <code class="docutils literal notranslate"><span class="pre">designer</span></code> is
structured XML file, which could be parsed by Qt libraries to show the UI in
the Qt applications, however, it is designed for both C++ and Python, so if
you’re working on the PyQt application, another command named <code class="docutils literal notranslate"><span class="pre">pyuic5</span></code> could
be used to convert the UI file into Python module, which could be imported by
your PyQt application. There is a way that at the runtime, the UI file could be
loaded into to render the GUI, but it is recommended that always converting
UI file to Python module before runtime, since there might be chances that
different PyQt versions would be applied between development and runtime.</p>
<p>After installing <code class="docutils literal notranslate"><span class="pre">mpl4qt</span></code>, simply type <code class="docutils literal notranslate"><span class="pre">run_designer</span></code> in the Linux
terminal to launch designer:</p>
<a class="reference internal image-reference" href="../_images/designer_startup.png"><img alt="../_images/designer_startup.png" class="align-center" src="../_images/designer_startup.png" style="width: 800px;" /></a>
<p>As one can see, in the <em>Widget Box</em> column, a new category of so-called
<em>DataViz Widgets</em> is shown, inside which there is one widget called
<em>MatplotlibCurveWidget</em>, which is ready to be dragged&amp;dropped.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the following error message happens: <em>qtcore.so: undefined symbol: pyslice_adjustindices</em>, could be resolved by uninstalling pyqt5 package by <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">pyqt5</span></code>, and installing the OS distributed one, see <a class="reference internal" href="deploy.html#deploy-pre"><span class="std std-ref">Install mpl4qt</span></a>.</p>
</div>
</section>
<section id="random-x-y-curve-plotter">
<span id="id1"></span><h2>Random X-Y Curve Plotter<a class="headerlink" href="#random-x-y-curve-plotter" title="Permalink to this heading"></a></h2>
<p><strong>What does this application do?</strong> This app will make the most of
<em>MatplotlibCurveWidget</em>, to show how the figure properties could be controlled
interactively, and how the curve could be updated.</p>
<section id="create-a-new-application">
<h3>Create a New Application<a class="headerlink" href="#create-a-new-application" title="Permalink to this heading"></a></h3>
<p>In the designer, click the <em>New icon</em> in the toolbar or menu
<span class="raw-html"><kbd>File</kbd></span> <span class="raw-html">&rarr;</span> <span class="raw-html"><kbd>New</kbd></span>
or <span class="raw-html"><kbd>Ctrl</kbd></span> + <span class="raw-html"><kbd>N</kbd></span> to create a new project for the
new application:</p>
<a class="reference internal image-reference" href="../_images/app1_01.png"><img alt="../_images/app1_01.png" class="align-center" src="../_images/app1_01.png" style="width: 800px;" /></a>
<p>One can choose <em>Screen Size</em>, but leave it as Default size is OK, the size
could be adjusted later, click <em>Create</em> button will lead you to the form
workspace. Adjust the form size by dragging the form border.</p>
</section>
<section id="place-widgets">
<h3>Place Widgets<a class="headerlink" href="#place-widgets" title="Permalink to this heading"></a></h3>
<p>All the widgets in the <em>Widget Box</em> column could be dragged and dropped to
the form space to serve with different purposes, e.g. the <em>Label</em> usually
is used to provide the static indication. So we can place a title with <em>Label</em>:
drag the <em>Label</em> icon from <em>Widget Box</em> to the form workspace, double-click
to name it as <em>Random X-Y Curve Plotter</em>, and in the <em>Property Editor</em> column,
simply check out some items to make it look better, e.g. set <em>Point Size</em> as
20, check <em>Bold</em>, just as the following image shows:</p>
<a class="reference internal image-reference" href="../_images/app1_02.png"><img alt="../_images/app1_02.png" class="align-center" src="../_images/app1_02.png" style="width: 800px;" /></a>
<p>Next, place the <em>MatplotlibCurveWidget</em> into the workspace in the same way,
and one button for random curve generation, change the button text to <em>Update</em>.</p>
<p>After that, you’ll get something like this:</p>
<a class="reference internal image-reference" href="../_images/app1_03.png"><img alt="../_images/app1_03.png" class="align-center" src="../_images/app1_03.png" style="width: 800px;" /></a>
<p>Inside the <em>designer</em>, the initial widget configuration could be edited through
<em>Property Editor</em> column, e.g. this is the list for <em>MatplotlibCurveWidget</em>:</p>
<a class="reference internal image-reference" href="../_images/curve_plist.png"><img alt="../_images/curve_plist.png" class="align-center" src="../_images/curve_plist.png" style="width: 300px;" /></a>
</section>
<section id="inspect-matplotlibcurvewidget">
<h3>Inspect MatplotlibCurveWidget<a class="headerlink" href="#inspect-matplotlibcurvewidget" title="Permalink to this heading"></a></h3>
<p>Before moving forward, let’s first take a look at what does <em>MatplotlibCurveWidget</em> provide, a good way to know is to run this app. Yes, the app is just ready
to run.</p>
<p>Save this project by clicking <em>Save icon</em> in the toolbar or
<span class="raw-html"><kbd>Ctrl</kbd></span> + <span class="raw-html"><kbd>S</kbd></span>, locate
and name it as <em>ui_app1.ui</em>, check out to the location where the ui file is,
in the terminal, run the following command to convert ui file to Python module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pyuic5</span> <span class="n">ui_app1</span><span class="o">.</span><span class="n">ui</span> <span class="o">-</span><span class="n">o</span> <span class="n">ui_app1</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">x</span>
</pre></div>
</div>
<p>You’ll get a new Python file generated from ui file, simply run with
<code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">ui_app1.py</span></code>, a window will pop up:</p>
<a class="reference internal image-reference" href="../_images/app1_04.png"><img alt="../_images/app1_04.png" class="align-center" src="../_images/app1_04.png" style="width: 500px;" /></a>
<p>The <em>MatplotlibCurveWidget</em> is designed with the ability to change the
figure properties via the context menu, by right-clicking in the figure,
choose <em>Config</em> item will guide you to a popup dialog, close it by hitting
<em>ESC</em> or clicking <em>Close</em> in the windows title bar.</p>
<p>Here is the list of available options could be controlled via <em>Config</em> menu,
just name as a few: line color, line style, line width, marker size, marker
style, marker color, labels, as well as fonts, grid, layout, etc.</p>
<a class="reference internal image-reference" href="../_images/config01.png"><img alt="../_images/config01.png" class="align-center" src="../_images/config01.png" style="width: 400px;" /></a>
<a class="reference internal image-reference" href="../_images/config02.png"><img alt="../_images/config02.png" class="align-center" src="../_images/config02.png" style="width: 400px;" /></a>
<a class="reference internal image-reference" href="../_images/config03.png"><img alt="../_images/config03.png" class="align-center" src="../_images/config03.png" style="width: 400px;" /></a>
</section>
<section id="edit-signal-slot">
<h3>Edit Signal/Slot<a class="headerlink" href="#edit-signal-slot" title="Permalink to this heading"></a></h3>
<p>Inside <em>designer</em>, signal and slot could be easily connected to implement
features, e.g. let’s add one <em>Double Spin Box</em> to control the line with.</p>
<p>Just like the following image shows:</p>
<a class="reference internal image-reference" href="../_images/app1_05.png"><img alt="../_images/app1_05.png" class="align-center" src="../_images/app1_05.png" style="width: 800px;" /></a>
<p>Then go to <em>Signal/Slot Editor</em>, connect the <em>valueChanged(double)</em> signal
of <em>doubleSpinBox</em> to <em>setLineWidth(double)</em> slot of <em>matplotlibcurveWidget</em>:</p>
<a class="reference internal image-reference" href="../_images/app1_06.png"><img alt="../_images/app1_06.png" class="align-center" src="../_images/app1_06.png" style="width: 800px;" /></a>
<p>Save and convert ui file again, run to see the changes.</p>
</section>
<section id="implement-additional-features">
<h3>Implement Additional Features<a class="headerlink" href="#implement-additional-features" title="Permalink to this heading"></a></h3>
<p><em>MatplotlibCurveWidget</em> features a lot of functionality that could be
implemented via Qt’s signal and slot mechanism <a class="footnote-reference brackets" href="#f1" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.
Some of them could be achieved in <em>designer</em>, but some are not,
see <a class="reference internal" href="dev.html#dev-slots"><span class="std std-ref">Slots</span></a>.
One of the additional
fundamental ones is to update the curve, e.g. the <em>Update</em> should be
used as the trigger for curve updating, every clicking, here, the curve
would be updated with a new sine curve with random noise.</p>
<p>The slot
<a class="reference internal" href="dev.html#mpl4qt.widgets.mplcurvewidget.MatplotlibCurveWidget.setYData" title="mpl4qt.widgets.mplcurvewidget.MatplotlibCurveWidget.setYData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setYData()</span></code></a> could
be used to update the y data of the curve, generally, connecting with
a PyQt signal to this slot will make this happen. However, before writing
some code to the generated Python module, one thing should keep in mind,
that is usually the updating will not be applied directly to that Python file
in place, but by extending it, here is how to accomplish:</p>
<p>Create a new file named as, for instance, <code class="docutils literal notranslate"><span class="pre">app1.py</span></code>, and inherit the class
which renders the UI, then extend within the new class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">ui_app1</span> <span class="kn">import</span> <span class="n">Ui_Form</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span>
<span class="linenos"> 7</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">pyqtSignal</span><span class="p">,</span> <span class="n">pyqtSlot</span>
<span class="linenos"> 8</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QVariant</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="k">class</span> <span class="nc">RandomCurveWidget</span><span class="p">(</span><span class="n">Ui_Form</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">):</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="n">yDataChanged</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QVariant</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
<span class="linenos">18</span>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos">19</span>
<span class="linenos">20</span>        <span class="c1"># UI</span>
<span class="linenos">21</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span>        <span class="c1"># update_ydata</span>
<span class="linenos">24</span>        <span class="bp">self</span><span class="o">.</span><span class="n">yDataChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matplotlibcurveWidget</span><span class="o">.</span><span class="n">setYData</span><span class="p">)</span>
<span class="linenos">25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_ydata</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="linenos">28</span>    <span class="k">def</span> <span class="nf">update_ydata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">29</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set xy data for the curve figure.</span>
<span class="linenos">30</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">31</span>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matplotlibcurveWidget</span><span class="o">.</span><span class="n">getXData</span><span class="p">()</span>
<span class="linenos">32</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="linenos">33</span>        <span class="bp">self</span><span class="o">.</span><span class="n">yDataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">37</span>    <span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos">38</span>    <span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span>
<span class="linenos">39</span>
<span class="linenos">40</span>    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="linenos">41</span>    <span class="n">w</span> <span class="o">=</span> <span class="n">RandomCurveWidget</span><span class="p">()</span>
<span class="linenos">42</span>    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos">43</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
</div>
<p>One can note how the signal and slot mechanism works:</p>
<ol class="arabic simple">
<li><p>Define your PyQt signal;</p></li>
<li><p>Connect the signal to the specific slot;</p></li>
<li><p>Emit the signal when needed.</p></li>
</ol>
<p>In this example, the signal named <code class="docutils literal notranslate"><span class="pre">yDataChanged</span></code> is created with data type
of <code class="docutils literal notranslate"><span class="pre">QVariant</span></code>, then connected with <code class="docutils literal notranslate"><span class="pre">setYData</span></code> slot of
<em>matplotlibcurveWidget</em>; next, the <code class="docutils literal notranslate"><span class="pre">clicked</span></code> signal is connected with the
defined slot <code class="docutils literal notranslate"><span class="pre">update_ydata</span></code>, in which new y data is generated and emitted.</p>
<p>Run this app by <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">app1.py</span></code>, and click <code class="docutils literal notranslate"><span class="pre">Update</span></code> button to see the
updating curve, and change the figure property when needed, e.g. check
<em>Auto Scale</em> on and off (see below), to see the what happen.</p>
<a class="reference internal image-reference" href="../_images/update.gif"><img alt="../_images/update.gif" class="align-center" src="../_images/update.gif" style="width: 500px;" /></a>
</section>
<section id="extended">
<h3>Extended<a class="headerlink" href="#extended" title="Permalink to this heading"></a></h3>
<p><em>matplotlibcurveWidget</em> also supports multiple curves visualization by the slot
<a class="reference internal" href="dev.html#mpl4qt.widgets.mplcurvewidget.MatplotlibCurveWidget.add_curve" title="mpl4qt.widgets.mplcurvewidget.MatplotlibCurveWidget.add_curve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_curve()</span></code></a>.
Currently, multiple curves are managed by line ID, the first curve is of line
ID 0, the second one is of line ID 1, and so on. Every time <cite>add_curve</cite>, the
current line ID will be set of the new added one, so switching line ID is
required to do the data updating for other lines, by
<a class="reference internal" href="dev.html#mpl4qt.widgets.mplcurvewidget.MatplotlibCurveWidget.setLineID" title="mpl4qt.widgets.mplcurvewidget.MatplotlibCurveWidget.setLineID"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setLineID()</span></code></a> slot.</p>
<a class="reference internal image-reference" href="../_images/app1-extended.png"><img alt="../_images/app1-extended.png" class="align-center" src="../_images/app1-extended.png" style="width: 500px;" /></a>
<p>Below is an extended version of <code class="docutils literal notranslate"><span class="pre">app1.py</span></code>, which supports more operations.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">mpl4qt.examples.ui_app1</span> <span class="kn">import</span> <span class="n">Ui_Form</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span>
<span class="linenos"> 7</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">pyqtSignal</span>
<span class="linenos"> 8</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QVariant</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="k">class</span> <span class="nc">RandomCurveWidget</span><span class="p">(</span><span class="n">Ui_Form</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">):</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="n">yDataChanged</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QVariant</span><span class="p">)</span>
<span class="linenos">16</span>    <span class="n">addCurveSignal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
<span class="linenos">19</span>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos">20</span>
<span class="linenos">21</span>        <span class="c1"># UI</span>
<span class="linenos">22</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>        <span class="c1"># update_ydata</span>
<span class="linenos">25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">yDataChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matplotlibcurveWidget</span><span class="o">.</span><span class="n">setYData</span><span class="p">)</span>
<span class="linenos">26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_ydata</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span>        <span class="c1"># add curve</span>
<span class="linenos">29</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_curve_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_curve</span><span class="p">)</span>
<span class="linenos">30</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addCurveSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matplotlibcurveWidget</span><span class="o">.</span><span class="n">add_curve</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span>    <span class="k">def</span> <span class="nf">update_ydata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">33</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set xy data for the curve figure.</span>
<span class="linenos">34</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">35</span>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matplotlibcurveWidget</span><span class="o">.</span><span class="n">getXData</span><span class="p">()</span>
<span class="linenos">36</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="linenos">37</span>        <span class="bp">self</span><span class="o">.</span><span class="n">yDataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span>    <span class="k">def</span> <span class="nf">add_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">40</span>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matplotlibcurveWidget</span><span class="o">.</span><span class="n">getXData</span><span class="p">()</span>
<span class="linenos">41</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="linenos">42</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addCurveSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="linenos">43</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="linenos">46</span>    <span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos">47</span>    <span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span>
<span class="linenos">48</span>
<span class="linenos">49</span>    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="linenos">50</span>    <span class="n">w</span> <span class="o">=</span> <span class="n">RandomCurveWidget</span><span class="p">()</span>
<span class="linenos">51</span>    <span class="n">w</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;MatplotlibCurveWidget Example App&quot;</span><span class="p">)</span>
<span class="linenos">52</span>    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos">53</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
<span class="linenos">54</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">57</span>    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The full working example could be downloaded from
<a class="reference download internal" download="" href="../_downloads/a4eb823735b01f9b5628082d1ded4a9a/app1.tar.bz2"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
</section>
</section>
<section id="barchart-plot-example">
<h2>BarChart Plot Example<a class="headerlink" href="#barchart-plot-example" title="Permalink to this heading"></a></h2>
<p><strong>What does this application do?</strong> This app will visualize the data with bar
chart plot by using <em>MatplotlibBarWidget</em>.</p>
<p>The following snippet shows how to use this widget:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">ui_test4</span> <span class="kn">import</span> <span class="n">Ui_Form</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span>
<span class="linenos"> 7</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">pyqtSignal</span><span class="p">,</span> <span class="n">pyqtSlot</span>
<span class="linenos"> 8</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QVariant</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">Ui_Form</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">):</span>
<span class="linenos">16</span>    <span class="n">curveChanged</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">)</span>
<span class="linenos">17</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
<span class="linenos">18</span>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos">19</span>
<span class="linenos">20</span>        <span class="c1"># UI</span>
<span class="linenos">21</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span>        <span class="c1"># update curve</span>
<span class="linenos">24</span>        <span class="bp">self</span><span class="o">.</span><span class="n">curveChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matplotlibbarWidget</span><span class="o">.</span><span class="n">update_curve</span><span class="p">)</span>
<span class="linenos">25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">update_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_data</span><span class="p">)</span>
<span class="linenos">26</span>        <span class="c1">#</span>
<span class="linenos">27</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotlibbarWidget</span><span class="o">.</span><span class="n">clear_figure</span><span class="p">()</span>
<span class="linenos">28</span>
<span class="linenos">29</span>        <span class="bp">self</span><span class="o">.</span><span class="n">init_figure</span><span class="p">()</span>
<span class="linenos">30</span>
<span class="linenos">31</span>    <span class="k">def</span> <span class="nf">init_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">32</span>        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="linenos">33</span>        <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="linenos">34</span>        <span class="n">yerr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="linenos">35</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotlibbarWidget</span><span class="o">.</span><span class="n">init_figure</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yerr</span><span class="p">)</span>
<span class="linenos">36</span>
<span class="linenos">37</span>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="linenos">38</span>    <span class="k">def</span> <span class="nf">update_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">39</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set bar chart.</span>
<span class="linenos">40</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">41</span>        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span>
<span class="linenos">42</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span>
<span class="linenos">43</span>        <span class="n">yerr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span>        <span class="bp">self</span><span class="o">.</span><span class="n">curveChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yerr</span><span class="p">)</span>
<span class="linenos">46</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">49</span>    <span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos">50</span>    <span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span>
<span class="linenos">51</span>
<span class="linenos">52</span>    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="linenos">53</span>    <span class="n">w</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="linenos">54</span>    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos">55</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
</div>
<p>The full working example could be downloaded from
<a class="reference download internal" download="" href="../_downloads/55b20f04ac8aaafd58cb28c87c1ea8f9/app2.tar.bz2"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
</section>
<section id="stem-plot-example">
<h2>Stem Plot Example<a class="headerlink" href="#stem-plot-example" title="Permalink to this heading"></a></h2>
<p><strong>What does this application do?</strong> This app will demonstrate how to use <em>MatplotlibErrorbarWidget</em>
to visualize data in a stem plot style.</p>
<a class="reference internal image-reference" href="../_images/stemPlotEmulation.png"><img alt="../_images/stemPlotEmulation.png" class="align-center" src="../_images/stemPlotEmulation.png" style="width: 800px;" /></a>
<p>The following snippet shows how to use this widget:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos">  2</span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="linenos">  3</span>
<span class="linenos">  4</span><span class="kn">from</span> <span class="nn">ui_main</span> <span class="kn">import</span> <span class="n">Ui_Form</span>
<span class="linenos">  5</span>
<span class="linenos">  6</span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span>
<span class="linenos">  7</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">pyqtSignal</span><span class="p">,</span> <span class="n">pyqtSlot</span>
<span class="linenos">  8</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QVariant</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span>
<span class="linenos"> 13</span><span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">Ui_Form</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">):</span>
<span class="linenos"> 14</span>
<span class="linenos"> 15</span>    <span class="n">curveChanged</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">)</span>
<span class="linenos"> 16</span>    <span class="n">addCurveSignal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">)</span>
<span class="linenos"> 17</span>
<span class="linenos"> 18</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
<span class="linenos"> 19</span>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos"> 20</span>
<span class="linenos"> 21</span>        <span class="c1"># UI</span>
<span class="linenos"> 22</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span>        <span class="c1"># update curve</span>
<span class="linenos"> 25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">curveChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_curve</span><span class="p">)</span>
<span class="linenos"> 26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">update_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_xydata</span><span class="p">)</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span>        <span class="c1"># add_curve</span>
<span class="linenos"> 29</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_curve_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_curve</span><span class="p">)</span>
<span class="linenos"> 30</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addCurveSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">add_curve</span><span class="p">)</span>
<span class="linenos"> 31</span>
<span class="linenos"> 32</span>        <span class="c1">#</span>
<span class="linenos"> 33</span>        <span class="bp">self</span><span class="o">.</span><span class="n">update_line_ids</span><span class="p">()</span>
<span class="linenos"> 34</span>        <span class="c1"># hide the first line</span>
<span class="linenos"> 35</span>        <span class="bp">self</span><span class="o">.</span><span class="n">hide_line</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 36</span>        <span class="c1">#</span>
<span class="linenos"> 37</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_curve_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
<span class="linenos"> 38</span>
<span class="linenos"> 39</span>    <span class="k">def</span> <span class="nf">hide_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<span class="linenos"> 40</span>        <span class="bp">self</span><span class="o">.</span><span class="n">set_current_line_id</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 41</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setLineVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 42</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setEbLineVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 43</span>
<span class="linenos"> 44</span>    <span class="k">def</span> <span class="nf">update_line_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 45</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the inventory of line IDs.</span>
<span class="linenos"> 46</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos"> 47</span>        <span class="bp">self</span><span class="o">.</span><span class="n">line_id_cbb</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="linenos"> 48</span>        <span class="n">n_curves</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">get_all_curves</span><span class="p">())</span>
<span class="linenos"> 49</span>        <span class="bp">self</span><span class="o">.</span><span class="n">line_id_cbb</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;Curve </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_curves</span><span class="p">)])</span>
<span class="linenos"> 50</span>        <span class="c1"># set the current line to the last added one</span>
<span class="linenos"> 51</span>        <span class="bp">self</span><span class="o">.</span><span class="n">set_current_line_id</span><span class="p">(</span><span class="n">n_curves</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 52</span>        <span class="bp">self</span><span class="o">.</span><span class="n">line_id_cbb</span><span class="o">.</span><span class="n">setCurrentText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Curve </span><span class="si">{</span><span class="n">n_curves</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 53</span>        <span class="k">return</span> <span class="n">n_curves</span> <span class="o">-</span> <span class="mi">1</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span>    <span class="k">def</span> <span class="nf">update_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xerr_l</span><span class="p">,</span> <span class="n">xerr_r</span><span class="p">,</span> <span class="n">yerr_d</span><span class="p">,</span> <span class="n">yerr_t</span><span class="p">):</span>
<span class="linenos"> 56</span>        <span class="n">line_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_id_cbb</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
<span class="linenos"> 57</span>        <span class="bp">self</span><span class="o">.</span><span class="n">set_current_line_id</span><span class="p">(</span><span class="n">line_id</span><span class="p">)</span>
<span class="linenos"> 58</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">update_curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xerr_l</span><span class="p">,</span> <span class="n">yerr_d</span><span class="p">,</span>
<span class="linenos"> 59</span>                <span class="n">err_method</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">xerr_data_r</span><span class="o">=</span><span class="n">xerr_r</span><span class="p">,</span> <span class="n">yerr_data_t</span><span class="o">=</span><span class="n">yerr_t</span><span class="p">)</span>
<span class="linenos"> 60</span>
<span class="linenos"> 61</span>    <span class="k">def</span> <span class="nf">set_current_line_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<span class="linenos"> 62</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setLineID</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos"> 63</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setEbLineID</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos"> 64</span>
<span class="linenos"> 65</span>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="linenos"> 66</span>    <span class="k">def</span> <span class="nf">update_xydata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 67</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set xy data for the curve figure.</span>
<span class="linenos"> 68</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos"> 69</span>        <span class="n">line_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_id_cbb</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
<span class="linenos"> 70</span>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">get_all_curves</span><span class="p">()[</span><span class="n">line_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">()</span>
<span class="linenos"> 71</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">*</span> <span class="mi">6</span>
<span class="linenos"> 72</span>        <span class="bp">self</span><span class="o">.</span><span class="n">curveChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="linenos"> 75</span>    <span class="k">def</span> <span class="nf">add_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 76</span>        <span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="linenos"> 77</span>        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="linenos"> 78</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span>
<span class="linenos"> 79</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addCurveSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos"> 80</span>        <span class="c1">#</span>
<span class="linenos"> 81</span>        <span class="n">last_line_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_line_ids</span><span class="p">()</span>
<span class="linenos"> 82</span>        <span class="c1"># set styles</span>
<span class="linenos"> 83</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setLineStyle</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
<span class="linenos"> 84</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setMarkerSize</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos"> 85</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setEbMarkerThickness</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 86</span>        <span class="bp">self</span><span class="o">.</span><span class="n">matplotliberrorbarWidget</span><span class="o">.</span><span class="n">setEbLineWidth</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 87</span>        <span class="c1"># call update_curve to set down yerror</span>
<span class="linenos"> 88</span>        <span class="bp">self</span><span class="o">.</span><span class="n">update_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span>
<span class="linenos"> 92</span>
<span class="linenos"> 93</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos"> 94</span>    <span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 95</span>    <span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span>    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="linenos"> 98</span>    <span class="n">w</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="linenos"> 99</span>    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos">100</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
</div>
<p>The full working example could be downloaded from
<a class="reference download internal" download="" href="../_downloads/f93a31ac72acf93de94f5431e12a4218/stemEmulation.zip"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="http://doc.qt.io/qt-5/signalsandslots.html">http://doc.qt.io/qt-5/signalsandslots.html</a></p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="deploy.html" class="btn btn-neutral float-left" title="Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="keyshort.html" class="btn btn-neutral float-right" title="Keyborard Shortcuts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2019, Tong Zhang &lt;zhangt@frib.msu.edu&gt;.
      <span class="lastupdated">Last updated on Jun 30, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>